!function(){"use strict";function e(e){if(null==e)return!0;for(var t in e)if(e[t])return!1;return!0}var t=["onmount","onremount","onunmount"],n="undefined"!=typeof window&&"ShadowRoot"in window;function i(i,o,s,a){var l=c(i),d=c(o);o===d&&d.__redom_view&&(o=d.__redom_view),o!==d&&(d.__redom_view=o);var u=d.__redom_mounted,f=d.parentNode;return u&&f!==l&&function(t,n,i){var o=n.__redom_lifecycle;if(e(o))n.__redom_lifecycle={};else{var s=i;for(n.__redom_mounted&&r(n,"onunmount");s;){var a=s.__redom_lifecycle||{};for(var l in o)a[l]&&(a[l]-=o[l]);e(a)&&(s.__redom_lifecycle=null),s=s.parentNode}}}(0,d,f),null!=s?a?l.replaceChild(d,c(s)):l.insertBefore(d,c(s)):l.appendChild(d),function(e,i,o,s){for(var a=i.__redom_lifecycle||(i.__redom_lifecycle={}),l=o===s,d=!1,u=0,c=t;u<c.length;u+=1){var f=c[u];l||e!==i&&f in e&&(a[f]=(a[f]||0)+1),a[f]&&(d=!0)}if(!d)return void(i.__redom_lifecycle={});var g=o,h=!1;(l||g&&g.__redom_mounted)&&(r(i,l?"onremount":"onmount"),h=!0);for(;g;){var m=g.parentNode,v=g.__redom_lifecycle||(g.__redom_lifecycle={});for(var _ in a)v[_]=(v[_]||0)+a[_];if(h)break;(g.nodeType===Node.DOCUMENT_NODE||n&&g instanceof ShadowRoot||m&&m.__redom_mounted)&&(r(g,l?"onremount":"onmount"),h=!0),g=m}}(o,d,l,f),o}function r(e,t){"onmount"===t||"onremount"===t?e.__redom_mounted=!0:"onunmount"===t&&(e.__redom_mounted=!1);var n=e.__redom_lifecycle;if(n){var i=e.__redom_view,o=0;for(var s in i&&i[t]&&i[t](),n)s&&o++;if(o)for(var a=e.firstChild;a;){var l=a.nextSibling;r(a,t),a=l}}}function o(e,t,n){e.style[t]=null==n?"":n}var s="http://www.w3.org/1999/xlink";function a(e,t,n,i){var r=c(e);if("object"==typeof t)for(var s in t)a(r,s,t[s],i);else{var u=r instanceof SVGElement,f="function"==typeof n;if("style"===t&&"object"==typeof n)!function(e,t,n){var i=c(e);if("object"==typeof t)for(var r in t)o(i,r,t[r]);else o(i,t,n)}(r,n);else if(u&&f)r[t]=n;else if("dataset"===t)d(r,n);else if(u||!(t in r)&&!f||"list"===t){if(u&&"xlink"===t)return void l(r,n);i&&"class"===t&&(n=r.className+" "+n),null==n?r.removeAttribute(t):r.setAttribute(t,n)}else r[t]=n}}function l(e,t,n){if("object"==typeof t)for(var i in t)l(e,i,t[i]);else null!=n?e.setAttributeNS(s,t,n):e.removeAttributeNS(s,t,n)}function d(e,t,n){if("object"==typeof t)for(var i in t)d(e,i,t[i]);else null!=n?e.dataset[t]=n:delete e.dataset[t]}function u(e,t,n){for(var r=0,o=t;r<o.length;r+=1){var s=o[r];if(0===s||s){var l=typeof s;"function"===l?s(e):"string"===l||"number"===l?e.appendChild((d=s,document.createTextNode(null!=d?d:""))):f(c(s))?i(e,s):s.length?u(e,s,n):"object"===l&&a(e,s,null,n)}}var d}function c(e){return e.nodeType&&e||!e.el&&e||c(e.el)}function f(e){return e&&e.nodeType}var g={};function h(e){for(var t,n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];var r=typeof e;if("string"===r)t=v(e).cloneNode(!1);else if(f(e))t=e.cloneNode(!1);else{if("function"!==r)throw new Error("At least one argument required");var o=e;t=new(Function.prototype.bind.apply(o,[null].concat(n)))}return u(c(t),n,!0),t}var m=h;function v(e){return g[e]||(g[e]=function(e,t){var n=function(e){for(var t=e.split(/([#.])/),n="",i="",r=[],o=0;o<t.length;o++){var s=t[o];"#"===s?i=t[++o]:"."===s?r.push(t[++o]):s.length&&(n=s)}return{tag:n||"div",id:i,className:r.join(" ")}}(e),i=n.tag,r=n.id,o=n.className,s=t?document.createElementNS(t,i):document.createElement(i);return r&&(s.id=r),o&&(t?s.setAttribute("class",o):s.className=o),s}(e))}h.extend=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var i=v(e);return h.bind.apply(h,[this,i].concat(t))};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}("* {\n  font-family: Arial, Helvetica, sans-serif;\n}\n\n.nav-bar {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  padding: 10px 40px;\n}\n.nav-bar div.left,\n.nav-bar div.right {\n  flex: 1;\n}\n\n.nav-bar div.right {\n  text-align: right;\n}\na.signout {\n  text-decoration: none;\n}\n");class _{signIn;constructor(e){const{loginWidgetElId:t,setUser:n,...i}=e;this.loginWidgetElId=t,this.setUser=n,this.signIn=new OktaSignIn(i)}async init(){try{this.signIn.session.get((async e=>{"ACTIVE"===e.status?this.setUser({username:e.login,userId:e.userId}):this.showSignIn()}))}catch(e){alert("Error",e.message)}}showSignIn(){this.signIn.renderEl({el:"#widget-container"},(e=>{"SUCCESS"===e.status&&(this.signIn.tokenManager.add("id_token",e[0]),this.signIn.tokenManager.add("access_token",e[1]),alert("Already logged in"))}))}signOut(e){return this.signIn.session.close((t=>{if(t)return alert("Error while loggin out",t);e(),this.showSignIn()}))}}class p{constructor(e){this.signOutCallback=e.signOutCallback}render(e){const t=m("div.username",`Hello! ${e.username}`),n=m("a.signout","Logout");n.setAttribute("href","#"),n.addEventListener("click",this.signOutCallback);return m("nav.nav-bar",[m(".left",m("h1.logo","Preference Centre")),m(".right",[t,n])])}}new class{constructor(e,t){this.root=document.getElementById(e),this.loginWidgetElId=t,this.oktaWidget=null,this.navbar=new p({signOutCallback:this.signOutCallback}),this.user=null}setUser=e=>{this.user={...e},this.render()};signOutCallback=()=>{this.oktaWidget.signOut((e=>{this.user=null,this.render()}))};initialiseOkta(){this.oktaWidget=new _({baseUrl:"https://dev-18686994.okta.com",clientId:"0oat5ullll0fCIy2R5d6",redirectUri:window.location.origin,authParams:{pkce:!1,issuer:"default",responseType:["code"]},loginWidgetElId:this.loginWidgetElId,setUser:this.setUser}),this.oktaWidget.init()}render(){if(this.root.innerHTML="",this.user){const e=m("div",this.navbar.render(this.user));i(this.root,e)}else this.initialiseOkta()}init(){this.render()}}("root","widget-container").init()}();
//# sourceMappingURL=bundle.js.map
